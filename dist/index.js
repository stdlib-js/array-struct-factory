"use strict";var R=function(f,t){return function(){return t||f((t={exports:{}}).exports,t),t.exports}};var I=R(function(le,j){"use strict";var z=require("@stdlib/array-base-getter"),J=require("@stdlib/array-base-accessor-getter"),M=require("@stdlib/array-uint8"),K=require("@stdlib/blas-base-gcopy").ndarray;function Q(f,t,v){var c,s,i,b,e,n,m,l,r,a,u,g;for(n={format:"layout"},m=v.length,v.get&&v.set?l=J("default"):l=z("default"),b=f.layout,a=f.byteLength,s=new M(t),i=0,g=0;g<m;g++){u=l(v,g);try{e=f.viewOf(u),r=!0}catch(E){try{u=new f(u)}catch(p){return null}e=f.viewOf(u),r=!1}if(r&&u.toString(n)!==b)return null;c=new M(e.buffer,e.byteOffset,e.byteLength),K(a,c,1,0,s,1,i),i+=a}return t}j.exports=Q});var N=R(function(he,F){"use strict";function W(f){var t,v;for(t=[];v=f.next(),!v.done;)t.push(v.value);return t}F.exports=W});var H=R(function(ve,D){"use strict";var X=require("@stdlib/assert-is-struct-constructor-like"),d=require("@stdlib/assert-is-nonnegative-integer").isPrimitive,S=require("@stdlib/assert-is-integer").isPrimitive,P=require("@stdlib/assert-is-arraybuffer"),V=require("@stdlib/assert-is-collection"),k=require("@stdlib/assert-is-function"),Y=require("@stdlib/assert-is-object"),Z=require("@stdlib/assert-is-prototype-of"),$=require("@stdlib/assert-has-iterator-symbol-support"),ee=require("@stdlib/assert-has-property"),re=require("@stdlib/array-base-assert-contains"),y=require("@stdlib/utils-define-nonenumerable-read-only-property"),q=require("@stdlib/utils-define-nonenumerable-read-only-accessor"),x=require("@stdlib/symbol-iterator"),A=require("@stdlib/array-buffer"),C=require("@stdlib/array-uint8"),U=require("@stdlib/array-base-getter"),te=require("@stdlib/array-base-accessor-getter"),ne=require("@stdlib/blas-base-gcopy").ndarray,ae=require("@stdlib/dstructs-struct"),o=require("@stdlib/string-format"),G=I(),ie=N(),ue=$(),L="StructArray";function oe(f){var t,v,c,s;if(V(f))s=ae(f);else if(X(f))s=f;else throw new TypeError(o("invalid argument. First argument must be either a struct constructor or struct schema. Value: `%s`.",f));t=s.byteLength,v=s.layout,c=s.fields;function i(e,n,m){var l,r,a,u;if(l=arguments.length,!(this instanceof i))return l===0?new i:l===1?new i(e):l===2?new i(e,n):new i(e,n,m);if(l===0)r=new A(0),a=0;else if(l===1)if(d(e))r=new A(e*t),a=e;else if(V(e)){if(a=e.length,r=G(s,new A(a*t),e),r===null)throw new TypeError(o("invalid argument. Each element of a provided input array must be a valid object or a struct instance having the same layout as elements in the desired output array."))}else if(P(e)){if(r=e,a=r.byteLength/t,!S(a))throw new RangeError(o("invalid argument. ArrayBuffer byte length must be a multiple of %u. Byte length: `%u`.",t,r.byteLength))}else if(Y(e)){if(ue===!1)throw new TypeError(o("invalid argument. Environment lacks Symbol.iterator support. First argument must be a length, ArrayBuffer, typed array, or array-like object. Value: `%s`.",e));if(!k(e[x]))throw new TypeError(o("invalid argument. First argument must be a length, ArrayBuffer, typed array, array-like object, or an iterable. Value: `%s`.",e));if(r=e[x](),!k(r.next))throw new TypeError(o("invalid argument. First argument must be a length, ArrayBuffer, typed array, array-like object, or an iterable. Value: `%s`.",e));if(u=ie(r),a=u.length,r=G(s,new A(a*t),u),r===null)throw new TypeError(o("invalid argument. Each element of a provided input iterable must be either a valid object or a struct instance having the same layout as elements in the desired output array."))}else throw new TypeError(o("invalid argument. First argument must be a length, ArrayBuffer, typed array, array-like object, or an iterable. Value: `%s`.",e));else{if(r=arguments[0],!P(r))throw new TypeError(o("invalid argument. First argument must be an ArrayBuffer. Value: `%s`.",e));if(!d(n))throw new TypeError(o("invalid argument. Second argument must be a nonnegative integer. Value: `%s`.",n));if(!S(n/t))throw new RangeError(o("invalid argument. Second argument must be a multiple of %u. Value: `%u`.",t,n));if(n>=r.byteLength)throw new RangeError(o("invalid argument. Second argument exceeds the bounds of the ArrayBuffer. Value: `%s`.",n));if(l===2){if(a=(r.byteLength-n)/t,!S(a))throw new RangeError(o("invalid argument. ArrayBuffer view byte length must be a multiple of %u. View byte length: `%u`.",t,r.byteLength-n))}else{if(a=m,!d(a))throw new TypeError(o("invalid argument. Third argument must be a nonnegative integer. Value: `%s`.",a));if(a*t>r.byteLength-n)throw new RangeError(o("invalid arguments. ArrayBuffer has insufficient capacity. Either decrease the array length or provide a bigger buffer. Minimum capacity: `%u`.",a*t))}}return y(this,"_buffer",r),y(this,"_byteOffset",n||0),y(this,"_byteLength",a*t),y(this,"_length",a),this}return y(i,"BYTES_PER_ELEMENT",t),y(i,"name",L),y(i,"struct",s),q(i.prototype,"buffer",function(){return this._buffer}),q(i.prototype,"byteLength",function(){return this._byteLength}),q(i.prototype,"byteOffset",function(){return this._byteOffset}),y(i.prototype,"BYTES_PER_ELEMENT",i.BYTES_PER_ELEMENT),y(i.prototype,"get",function(n){if(!b(this))throw new TypeError(o("invalid invocation. `this` is not a %s.",L));if(!d(n))throw new TypeError(o("invalid argument. Must provide a nonnegative integer. Value: `%s`.",n));if(!(n>=this._length))return new s(this._buffer,this._byteOffset+n*t,t)}),q(i.prototype,"length",function(){return this._length}),y(i.prototype,"set",function(n){var m,l,r,a,u,g,E,p,w,T,O,_,h,B;if(!b(this))throw new TypeError(o("invalid invocation. `this` is not a %s.",L));if(g=this._buffer,arguments.length>1){if(u=arguments[1],!d(u))throw new TypeError(o("invalid argument. Index argument must be a nonnegative integer. Value: `%s`.",u))}else u=0;if(a={format:"layout"},w=s.byteLength,V(n)&&!re(c,"length")){if(T=n.length,u+T>this._length)throw new RangeError("invalid arguments. Target array lacks sufficient storage to accommodate source values.");if(r=n,r.get&&r.set?p=te("default"):p=U("default"),B=this._byteOffset+u*t,r.buffer===g&&r.byteOffset<B&&r.byteOffset+r.byteLength>B){for(E=[],h=0;h<T;h++)E.push(p(n,h));r=E,p=U("default")}for(h=0;h<T;u++,h++)this.set(p(r,h),u);return}if(u>=this._length)throw new RangeError(o("invalid argument. Index argument is out-of-bounds. Value: `%u`.",u));if(!Y(n))throw new TypeError(o("invalid argument. Must provide either a valid object or a struct instance. Value: `%s`.",n));if(n.toString(a)===v){r=s.viewOf(n),l=new C(r.buffer,r.byteOffset,w),m=new C(g,this._byteOffset+u*t,w),ne(w,l,1,0,m,1,0);return}for(O=new s(g,this._byteOffset+u*t,w),h=0;h<c.length;h++)_=c[h],ee(n,_)&&(O[_]=n[_])}),y(i.prototype,"struct",s),i;function b(e){return typeof e=="object"&&e!==null&&(e.constructor.name===L||Z(e,i.prototype))&&e.BYTES_PER_ELEMENT===t}}D.exports=oe});var se=H();module.exports=se;
/**
* @license Apache-2.0
*
* Copyright (c) 2025 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
//# sourceMappingURL=index.js.map
